---
title: MDI Data Packages
has_children: false
nav_order: 20
---

## {{page.title}}

The MDI exploits
[staged data analysis](https://midataint.github.io/docs/analysis-flow/),
which means that processed data files flow from a Stage 1 Pipeline
to a Stage 2 App. Such data, with potentially multiple distinct files,
are carried in a zipped **data package** generated by the MDI pipelines framework
as instructed by a pipeline.

All apps are launched from a generic framework page that supports the upload 
of both data packages and bookmark files as the user's entry point to
your app. In other words, the typical way users make first calls to load your
app is by providing a compatible data package.

As a result, in addition to an app name, description and possibly verion, 
your app's configuration must declare the types 
of data packages it accepts and the files it expects those packages to contain.

This matching method creates a _many-to-many_ relationship
between data packages and apps, e.g., multiple apps might be willing to
work on the same data package. More typically, you will design a pipeline
and and app as _one-to-one_ partners.

### App step declaration in \<app\>/config.yml

The steps for your app are listed in its config.yml file,
following the instructions found in the template file:

```yml
# <app>/config.yml
name: <appName>
description: ...
version: v0.0.0
uploadTypes:
    <uploadTypeName>: # as declared in a pipeline.yml 
        contentFileTypes:
            <contentFileTypeName>:  
                required: true/false
```

As an example:

```yml
# <pipeline>/pipeline.yml
package:
    do:
        uploadType: myDataType 
        files:
            fileType_1:  
                type: tab-delimited 
                file: $DATA_FILE_PREFIX.xxx.txt 
```

```yml
# <app>/config.yml
uploadTypes:
    myDataType:
        contentFileTypes:
            fileType_1:  
                required: true
            fileType_2: # OK to be missing from the package above
                required: false        
```

In the example above, the app will be offered to users as a way 
to handle data packages with an uploadType of `myDataType` that 
carry a file declared as being of contentFileType `fileType_1`.
